There are a few implementations of this already, this one is not very complete